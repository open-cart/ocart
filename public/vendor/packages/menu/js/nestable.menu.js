(()=>{function e(e,n){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,d=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return d=e.done,e},e:function(e){o=!0,i=e},f:function(){try{d||null==a.return||a.return()}finally{if(o)throw i}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}$(document).ready((function(){function t(){var t=$("#nestable");if(t.length){var n=$("#nestable-input").data("input"),a=function(e){var t=e.length?e:$(e.target),n=t.data("output");n&&(window.JSON?n.val(window.JSON.stringify(t.nestable("serialize"))):n.val("JSON browser support required for this demo."))},r=function(t){var n,a={0:[]},r=e(t);try{for(r.s();!(n=r.n()).done;){var l=n.value,i=l.parent_id||"0";a[i]||(a[i]=[]),a[i].push(l)}}catch(e){r.e(e)}finally{r.f()}var d,o=e(t);try{for(o.s();!(d=o.n()).done;){var s=d.value;s.children=[],a[s.id]&&(s.children=a[s.id])}}catch(e){o.e(e)}finally{o.f()}return a[0]}(n),l='\n<li class="dd-item relative">\n            <div class="dd-handle flex-grow flex justify-between px-3 py-2 cursor-move border dark:bg-gray-800 dark:border-gray-700">\n                <div>Name</div>\n            </div>\n            <div class="flex-none flex flex justify-between items-center px-3 py-2 absolute top-0 right-0">\n                <a class="show-item-details text-blue-500" href="javascript:void(0)">Edit</a>\n                <span>&nbsp;|&nbsp;</span>\n                <a class="delete-item text-blue-500" href="javascript:void(0)">Delete</a>\n            </div>\n            <div style="display: none" class="item-details p-6 bg-white border-l border-r border-b dark:bg-gray-800 dark:border-gray-700">\n                <div class="flex flex-col space-y-3">\n                    <label class="flex items-center">\n                        <span class="w-40 inline-block">Title</span>\n                        <input name="title" type="text" class="border border-gray-300 focus:border-blue-500 focus:ring-0 bg-white text-gray-900\n appearance-none inline-block focus:text-gray-900 rounded py-2 px-3 focus:outline-none \n  dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:focus:text-gray-300\n  w-full"/>\n                    </label>\n                    <label class="flex items-center hidden">\n                        <span class="w-40 inline-block">URL</span>\n                        <input name="url" type="text" class="border border-gray-300 focus:border-blue-500 focus:ring-0 bg-white text-gray-900\n appearance-none inline-block focus:text-gray-900 rounded py-2 px-3 focus:outline-none \n  dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:focus:text-gray-300\n  w-full"/>\n                    </label>\n                    <label class="flex items-center">\n                        <span class="w-40 inline-block">Target</span>\n                        <select name="target" class="border border-gray-300 focus:border-blue-500 focus:ring-0 bg-white text-gray-900\n appearance-none inline-block focus:text-gray-900 rounded py-2 px-3 focus:outline-none \n  dark:bg-gray-800 dark:border-gray-700 dark:text-gray-300 dark:focus:text-gray-300\n  w-full">\n                            <option value="_self">Open link directly</option>\n                            <option value="_blank">Open link new tab</option>\n                        </select>\n                    </label>\n                </div>\n            </div>\n        </li>\n        ';t.on("change keyup",'input[type="text"], select',(function(e){var n=$(this),r=n.closest("li"),l=n.attr("name"),i=e.target.value;r.data(l,i),a(t.data("output",$("#nestable-output")))})),t.on("click",".show-item-details",(function(e){$(this).closest("li").find(".item-details").first().toggle()})),t.on("click",".delete-item",(function(e){var n=$(this).closest("li"),r=n.data("id"),l=$('.form-save-menu input[name="deleted_nodes"]');r&&l.val(l.val()+","+r),n.remove(),a(t.data("output",$("#nestable-output")))})),$(".btn-add-to-menu").click((function(){var e=$(this).closest(".panel-group");if("external_link"===e.attr("id")){var n=$("#node-title").val(),r=$("#node-url").val();if(!n)return;var i=$(l);i.addClass("dd-item flex relative"),i.data("id",""),i.data("title",n),i.data("reference_id",0),i.data("url",r),i.find("[name=title]").val(n),i.find("[name=url]").val(r),i.find(".dd-handle").html(n),i.find("label.hidden").removeClass("hidden"),t.children("ol").append(i)}else e.find("input:checked").each((function(){var e=$(this);e.click();var n=e.closest("li"),a=n.data("item"),r=n.data("type"),i=$(l);i.addClass("dd-item block relative"),i.data("id",""),i.data("title",a.name),i.data("reference_type",r),i.data("reference_id",a.id),i.find("[name=title]").val(a.name),i.find(".dd-handle").html(a.name),t.children("ol").append(i)}));a(t.data("output",$("#nestable-output")))})),function t(n,a){var r,i=e(n);try{for(i.s();!(r=i.n()).done;){var d,o=r.value,s=$(l);if(s.addClass("dd-item"),s.data("id",o.id),s.data("title",o.title),s.data("reference_type",o.reference_type),s.data("reference_id",o.reference_id),s.data("target",o.target),s.find("[name=title]").val(o.title),s.find("[name=target]").val(o.target),s.find(".dd-handle").html(o.title),o.reference_type||(s.find("label.hidden").first().removeClass("hidden"),s.find("[name=url]").val(o.url),s.data("url",o.url)),a.children("ol").append(s),null!==(d=o.children)&&void 0!==d&&d.length){var c=$(document.createElement("ol"));c.addClass("dd-list"),s.append(c),c.html(t(o.children,s))}}}catch(e){i.e(e)}finally{i.f()}}(r,t),t.nestable({group:1}).on("change",a),a(t.data("output",$("#nestable-output")))}}t(),"function"==typeof $.pjax&&$(document).on("pjax:complete",(function(){t()}))}))})();